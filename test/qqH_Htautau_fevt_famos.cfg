process PROD  = 
{

    # The number of events to be processed.
    untracked PSet maxEvents = {untracked int32 input = 20}
    
#    include "Configuration/ReleaseValidation/data/Services.cfi"
#    replace RandomNumberGeneratorService.sourceSeed = 234578

    service =  RandomNumberGeneratorService {
	untracked uint32 sourceSeed = 2456789
	# This is to initialize the random engine of Famos
	# Watch out! This works only if the FamosProducer label is "famosSimHits"
	PSet moduleSeeds =
	{
	    untracked uint32 VtxSmeared = 223456789
	    #	    untracked uint32 famosSimHits = 23579
	    untracked uint32 famosSimHits = 235791312
	    untracked uint32 siTrackerGaussianSmearingRecHits = 34680
	    untracked uint32 caloRecHits = 754321
	}
    }
    

    # generation parameters
    source = PythiaSource 
    { 
	untracked int32 pythiaPylistVerbosity = 0
	untracked bool pythiaHepMCVerbosity = false
	untracked int32 maxEventsToPrint = 0
	
	PSet PythiaParameters = {

	    # This is a vector of ParameterSet names to be read, in this order
	    vstring parameterSets = {
		"pythiaUESettings", 
		"processParameters"
	    }
	    
	    include "Configuration/Generator/data/PythiaUESettings.cfi"
	    
	    vstring processParameters = {
		"PMAS(25,1)=115.0        !mass of Higgs",
		"MSEL=0                  !user selection for process",
		"MSUB(123)=1             !ZZ fusion to H",
		"MSUB(124)=1             !WW fusion to H",
		# Higgs decays
		"MDME(210,1)=0           !Higgs decay into dd",
		"MDME(211,1)=0           !Higgs decay into uu",
		"MDME(212,1)=0           !Higgs decay into ss",
		"MDME(213,1)=0           !Higgs decay into cc",
		"MDME(214,1)=0           !Higgs decay into bb",
		"MDME(215,1)=0           !Higgs decay into tt",
		"MDME(216,1)=0           !Higgs decay into",
		"MDME(217,1)=0           !Higgs decay into Higgs decay",
		"MDME(218,1)=0           !Higgs decay into e nu e",
		"MDME(219,1)=0           !Higgs decay into mu nu mu",
		"MDME(220,1)=1           !Higgs decay into tau tau",
		"MDME(221,1)=0           !Higgs decay into Higgs decay",
		"MDME(222,1)=0           !Higgs decay into g g",
		"MDME(223,1)=0           !Higgs decay into gam gam",
		"MDME(224,1)=0           !Higgs decay into gam Z",
		"MDME(225,1)=0           !Higgs decay into Z Z",
		"MDME(226,1)=0           !Higgs decay into W W"
	    }
	}
    }   

    
    
    
    
    # Famos sequences
    include "FastSimulation/Configuration/data/FamosSequences.cff"
    replace VolumeBasedMagneticFieldESProducer.useParametrizedTrackerField = true
    replace famosSimHits.SimulateCalorimetry = true
    replace famosSimHits.SimulateTracking = true
    replace famosSimHits.SimulatePileUp = false

#    replace famosSimHits.MaterialEffects.PairProduction = false
#    replace famosSimHits.MaterialEffects.Bremsstrahlung = false
#    replace famosSimHits.MaterialEffects.EnergyLoss = false
#    replace famosSimHits.MaterialEffects.MultipleScattering = false
#    replace famosSimHits.MaterialEffects.NuclearInteraction = false

    
    replace famosSimHits.VertexGenerator.SigmaX = 0.00001
    replace famosSimHits.VertexGenerator.SigmaY = 0.00001
    replace famosSimHits.VertexGenerator.SigmaZ = 0.00001

    # replace particleFlowBlock.verbose = true
    # replace particleFlow.verbose = true

    

    path p1 = { 
	famosWithCaloTowersAndParticleFlow,
	particleFlowSimParticle
    }
    
    include "Configuration/EventContent/data/EventContent.cff"
    module o1 = PoolOutputModule { 
	untracked string fileName = "qqh_htautau_fevt.root" 
	using FEVTSIMEventContent
#    	untracked PSet dataset ={	
#	    untracked string dataTier = "GEN-SIM-DIGI-RECO"
#	}
#	untracked vstring outputCommands = 
#	{
#            "drop *",
#            "keep recoPFRecHits_*_*_*",
#            "keep recoPFClusters_*_*_*",
#            "keep recoPFRecTracks_*_*_*",
#	    "keep recoPFBlocks_particleFlowBlock_*_*",
#	    "keep recoPFCandidates_particleFlow_*_*",
#            "keep recoPFSimParticles_*_*_*",
#            "keep recoTracks_*_*_*",
#	    "keep recoCaloJets_*_*_*",
#	    "keep CaloTowersSorted_*_*_*",
#	    "keep edmHepMCProduct_*_*_*"
#	}
    }
    replace o1.outputCommands += "keep recoPFSimParticles_*_*_*"
    replace o1.outputCommands += "keep recoPFRecTracks_*_*_*"
    replace o1.outputCommands += "keep recoPFRecHits_*_*_*"
    replace o1.outputCommands += "keep recoTracks_*_*_*"

    endpath outpath = {o1}
    
    # Keep the logging output to a nice level #
    include "FWCore/MessageService/data/MessageLogger.cfi"
    replace MessageLogger.destinations = {"cout"}
    replace MessageLogger.cout.threshold = "INFO"
    
}		
