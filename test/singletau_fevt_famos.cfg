process PROD  = 
{

    # The number of events to be processed.
    untracked PSet maxEvents = {untracked int32 input = 20}
    
    service =  RandomNumberGeneratorService {
	untracked uint32 sourceSeed = 223456789
	# This is to initialize the random engine of Famos
	# Watch out! This works only if the FamosProducer label is "famosSimHits"
	PSet moduleSeeds =
	{
	    untracked uint32 VtxSmeared = 223456789
#	    untracked uint32 famosSimHits = 23579
	    untracked uint32 famosSimHits = 235791312
	    untracked uint32 siTrackerGaussianSmearingRecHits = 34680
	    untracked uint32 caloRecHits = 754321
	}
    }
    

    source = FlatRandomEGunSource 
    {	 
	untracked uint32 firstRun  = 1
	untracked      PSet  PGunParameters =
	{
	    # you can request more than 1 particle
	    #untracked vint32  PartID = { 211, 11, -13 }
	    untracked vint32 PartID = {15} 
	    untracked double MinEta = -1.0
	    untracked double MaxEta = 1.0
	    # it must be in radians
	    untracked double MinPhi = -3.14159265358979323846
	    untracked double MaxPhi =  3.14159265358979323846
	    untracked double MinE   = 50.0000
	    untracked double MaxE   = 50.0001
	}
	# for printouts, set it to 1 (or greater)
	untracked int32 Verbosity = 0
    }

    
    
    # Famos sequences
    include "FastSimulation/Configuration/data/FamosSequences.cff"
    replace VolumeBasedMagneticFieldESProducer.useParametrizedTrackerField = true
    replace famosSimHits.SimulateCalorimetry = true
    replace famosSimHits.SimulateTracking = true
    replace famosSimHits.SimulatePileUp = false

#    replace famosSimHits.MaterialEffects.PairProduction = false
#    replace famosSimHits.MaterialEffects.Bremsstrahlung = false
#    replace famosSimHits.MaterialEffects.EnergyLoss = false
#    replace famosSimHits.MaterialEffects.MultipleScattering = false
#    replace famosSimHits.MaterialEffects.NuclearInteraction = false

    
    replace famosSimHits.VertexGenerator.SigmaX = 0.00001
    replace famosSimHits.VertexGenerator.SigmaY = 0.00001
    replace famosSimHits.VertexGenerator.SigmaZ = 0.00001

    # replace particleFlowBlock.verbose = true
    # replace particleFlow.verbose = true

    # replace particleFlowCluster.clustering_Hcal_CaloTowers = false

    module dump = EventContentAnalyzer {}

    path p1 = { 
	famosWithCaloTowersAndParticleFlow,
	particleFlowSimParticle
    }
    
    module o1 = PoolOutputModule { 
	untracked string fileName = "blocks_famos.root" 
	untracked vstring outputCommands = 
	{
            "drop *",
            "keep recoPFRecHits_*_*_*",
            "keep recoPFClusters_*_*_*",
            "keep recoPFRecTracks_*_*_*",
	    "keep recoPFBlocks_particleFlowBlock_*_*",
	    "keep recoPFCandidates_particleFlow_*_*",
            "keep recoPFSimParticles_*_*_*",
            "keep recoTracks_*_*_*",
	    "keep recoCaloJets_*_*_*",
	    "keep CaloTowersSorted_*_*_*",
	    "drop CaloTowersSorted_towerMakerPF_*_*",
	    "keep edmHepMCProduct_*_*_*"	    
	}
    }
    endpath outpath = {o1}
    
    # Keep the logging output to a nice level #
    include "FWCore/MessageService/data/MessageLogger.cfi"
}		
